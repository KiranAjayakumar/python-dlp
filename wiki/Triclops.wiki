#summary SPARQL server  implemented as a Python library using Python Paste and wsgiutils as a WSGI application
#labels Featured,Phase-Implementation,Phase-Deploy

= Introduction =

This wiki describes how Triclops can be configured to be used with the MySQL /  SPARQL-to-SQL implementation.

The package comes with a skeletal configuration file ( SPARQLServer-sample.conf ) snippets of which are shown below This file should be copied and modified accordingly for one or more SPARQL servers

{{{
[DEFAULT]
 #Configuration options for underlying RDFLib store
 store_identifier=..store identifier.
}}}

The store identifier is usually given for a particular dataset. MySQL credentials are placed to use to connect to a particular database (also given). So, this file probably should not be readable by anyone except priviledged users (preferably the same one that launches the server)

{{{
connection=user=..change me..,password=..change me..,host=..change me..,db=.. change me..
 store=MySQL
 static_files=%(here)s/htdocs
}}}

The relevant OWL file for a dataset is also given.

{{{
#This is the path to the OWL file to use for optimizing SPARQL queries
 datastore_owl=.. path to OWL file ..
}}}

Below is what should be used to register default namespace bindings:

{{{
#'|' delimited strings of the form _key_=_val_ where _key_ is a prefix and _val_ is the URI to bind it to
 #Whether or not to output additional (detailed) debugging information relevant
 #to the SPARQL query evaluation process.  An absence of this variable is
 #interpreted as being set to false (or 0)
 debugQuery=1
}}}

This variable determines whether or not the MySQL query optimizer should evaluate BGPs in the given triple pattern order to allow it to use statistical data to determine an appropriate join order

{{{
 #Whether or not to allow MySQL to use it's own methods to determine join order
 #This cannot be used in conjunction with DISABLE_SELECTION_ESTIMATION.
 #An absence of this variable is interpreted as being set to false (or 0)
 MYSQL_ORDER=1
}}}

{{{
NO_BASE_RESOLUTION=1
}}}

At this point, the server can be launched as a system daemon via:
{{{
 paster serve someConfigurationFile.conf --daemon --log=someLogFileName.log --pid-file=somePidFileName.pid
}}}

A running SPARQL service can be stopped with the following command (note the given pid and log file must be the same as the one used to start the daemon):

{{{
 paster serve someConfigurationFile.conf --stop-daemon --log=someLogFileName.log --pid-file=somePidFileName.pid
}}}

This should be run from the working directory of Triclops

= Entailment Regime Configuration =

For now, see [http://code.google.com/p/python-dlp/source/detail?r=351 log] for commit

= Proxy SPARQL Endpoint =

Using the _[http://code.google.com/p/python-dlp/wiki/LayerCakePythonDivergence#Generic_SPARQL_Store SPARQL client library as Generic SPARQL Store]_ capability, Triclops can be used as a [http://www.w3.org/TR/rdf-sparql-protocol/ SPARQL protocol for RDF] [http://en.wikipedia.org/wiki/Proxy_server proxy server] to a live SPARQL endpoint in the sense that it simply delegates the evaluation of SPARQL queries to the remote server but handles the rendering and (term-based) browsing of results from the query.